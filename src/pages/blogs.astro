---
import Layout from "../layouts/Layout.astro";
import CoreLayoutWhite from "../components/CoreLayout-white.astro";

import { getAllBlogPosts } from "../lib/contentful";
let blogPosts = [];
try {
  blogPosts = await getAllBlogPosts();
  console.log("Blog posts fetched:", blogPosts.length);
} catch (error) {
  console.error("Error fetching blog posts:", error);
}
---

<Layout>
  <CoreLayoutWhite>
    <!-- Breadcrumb -->

    <section class="breadcrumb-area">
      <div class="container container-semi-large">
        <div class="row">
          <div class="col-lg-12">
            <div
              class="breadcrumb-info text-center text-lg-start"
              data-lag="0.2"
              data-stagger="0.08"
            >
              <h1>Blog</h1>
              <p
                class="d-flex justify-content-center justify-content-lg-start align-items-center mt-2"
              >
                <a href="index.html">Homepage</a>
                <svg
                  width="25"
                  height="2"
                  viewBox="0 0 25 2"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    opacity="0.5"
                    d="M0.15625 1.27637L24.1562 1.27637"
                    stroke="white"></path>
                </svg>
                Blog
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Breadcrumb End -->

    <!-- Blog -->

    <section class="blog-area section-margin-top section-margin-bottom">
      <div class="container container-semi-large">
        <div class="row gy-5 gx-lg-5">
          <div class="col-lg-8">
            <div class="blog-wrapper d-flex flex-column gap-4 gap-lg-5">
              {
                blogPosts.map((post) => (
                  <div class="blog-two-box">
                    <div class="blog-two-img position-relative overflow-hidden">
                      <img
                        class="w-100 h-100 ft_object position-absolute top-0 start-0"
                        src={`https:${post.image.fields.file.url}`}
                        alt=""
                      />
                    </div>
                    <div class="blog-two-info mt-3">
                      <p class="text_black d-flex align-items-center gap-2 mt-1 flex-wrap">
                        <time
                          datetime={new Date(post.publishDate).toISOString()}
                        >
                          {new Date(post.publishDate).toLocaleDateString(
                            "en-US",
                            {
                              year: "numeric",
                              month: "long",
                              day: "numeric",
                            }
                          )}
                        </time>
                        <svg
                          width="18"
                          height="2"
                          viewBox="0 0 18 2"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path opacity="0.14" d="M0 1H18" stroke="#1A1A1A" />
                        </svg>
                        <a href="#">By {post.author}</a>
                      </p>
                      <h2 class="h2 blog-two-title mt-2">
                        <a href={`/blog/${post.slug}`}>{post.title}</a>
                      </h2>
                    </div>
                  </div>
                ))
              }
            </div>
            <div class="row row-top-margin">
              <div class="col-lg-12">
                <ul
                  class="page-list custom-ul d-flex justify-content-center flex-wrap gap-4"
                >
                  <li><a href="#"><i class="bi bi-chevron-left"></i></a></li>
                  <li><a href="#">01</a></li>
                  <li class="active"><a href="#">02</a></li>
                  <li><a href="#">03</a></li>
                  <li><a href="#"><i class="bi bi-chevron-right"></i></a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="sidebar-wrap">
              <div class="single-sidebar">
                <form class="sidebar-search position-relative" action="#">
                  <input class="w-100" type="search" placeholder="Search..." />
                  <button
                    class="border-0 p-0 m-0 position-absolute end-0 top-0 bg-transparent"
                    type="submit"
                  >
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M10.5 18C14.6421 18 18 14.6421 18 10.5C18 6.35786 14.6421 3 10.5 3C6.35786 3 3 6.35786 3 10.5C3 14.6421 6.35786 18 10.5 18Z"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"></path>
                      <path
                        d="M21 21L16 16"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </form>
              </div>
              <div class="single-sidebar">
                <h3 class="h3 sidebar-title d-block">Categories</h3>
                <ul class="sidebar-category custom-ul d-flex flex-column">
                  <li>Corporate <span>(01)</span></li>
                  <li>Innovative <span>(01)</span></li>
                  <li>Marketing <span>(01)</span></li>
                  <li>Technology <span>(01)</span></li>
                  <li>Creative Design <span>(01)</span></li>
                </ul>
              </div>
              <div class="single-sidebar">
                <h3 class="h3 sidebar-title d-block">Recent Blogs</h3>
                <div class="sidebar-recent-blog-wrap d-flex flex-column gap-4">
                  <div
                    class="sidebar-recent-blog d-flex flex-column flex-xl-row align-items-xl-center gap-3"
                  >
                    <div class="recent-blog-img w-100">
                      <img
                        class="w-100 ft_object"
                        src="assets/images/blog/recent-blog-1.png"
                        alt=""
                      />
                    </div>
                    <div class="recent-blog-info">
                      <h5 class="recent-blog-title">
                        Creating a brand identity
                      </h5>
                      <p
                        class="text_black d-flex align-items-center gap-2 mt-1 flex-wrap"
                      >
                        24 May, 2024
                        <svg
                          width="18"
                          height="2"
                          viewBox="0 0 18 2"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path opacity="0.14" d="M0 1H18" stroke="#1A1A1A"
                          ></path>
                        </svg>
                        <a href="#">By Anderson</a>
                      </p>
                    </div>
                  </div>
                  <div
                    class="sidebar-recent-blog d-flex flex-column flex-xl-row align-items-xl-center gap-3"
                  >
                    <div class="recent-blog-img w-100">
                      <img
                        class="w-100 ft_object"
                        src="assets/images/blog/recent-blog-2.png"
                        alt=""
                      />
                    </div>
                    <div class="recent-blog-info">
                      <h5 class="recent-blog-title">
                        Axole and tech innovators
                      </h5>
                      <p
                        class="text_black d-flex align-items-center gap-2 mt-1 flex-wrap"
                      >
                        24 May, 2024
                        <svg
                          width="18"
                          height="2"
                          viewBox="0 0 18 2"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path opacity="0.14" d="M0 1H18" stroke="#1A1A1A"
                          ></path>
                        </svg>
                        <a href="#">By Anderson</a>
                      </p>
                    </div>
                  </div>
                  <div
                    class="sidebar-recent-blog d-flex flex-column flex-xl-row align-items-xl-center gap-3"
                  >
                    <div class="recent-blog-img w-100">
                      <img
                        class="w-100 ft_object"
                        src="assets/images/blog/recent-blog-3.png"
                        alt=""
                      />
                    </div>
                    <div class="recent-blog-info">
                      <h5 class="recent-blog-title">
                        Automation in digital marketing
                      </h5>
                      <p
                        class="text_black d-flex align-items-center gap-2 mt-1 flex-wrap"
                      >
                        24 May, 2024
                        <svg
                          width="18"
                          height="2"
                          viewBox="0 0 18 2"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path opacity="0.14" d="M0 1H18" stroke="#1A1A1A"
                          ></path>
                        </svg>
                        <a href="#">By Anderson</a>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="single-sidebar">
                <h3 class="h3 sidebar-title d-block">Popular Tags</h3>
                <ul class="sidebar-tags custom-ul d-flex flex-wrap gap-3">
                  <li><a href="#">Corporate</a></li>
                  <li><a href="#">Health Care</a></li>
                  <li><a href="#">Technology</a></li>
                  <li><a href="#">Industry</a></li>
                  <li><a href="#">Marketing</a></li>
                  <li><a href="#">Innovation</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Blog End -->
  </CoreLayoutWhite>
</Layout>
